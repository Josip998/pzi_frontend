import{a as u}from"./axios-82afda87.js";import{_ as m,o as n,c as d,b as o,w as l,v as p,t as _,d as f,q as g,p as h,j as w}from"./index-4e547976.js";const b=u.create({baseURL:"http://pzi042023.studenti.sum.ba/backend"}),v={data(){return{formData:{email:"",password:""},errorMessage:""}},methods:{async loginUser(){try{const e=await b.post("/api/login",this.formData);if(e.status===200){console.log("Login Successful");const s=e.data.token;localStorage.setItem("token",s),this.$root.isAuthenticated=!0;const c=e.data.user;this.$router.afterEach(()=>{window.location.reload()}),this.$router.push("/profile/user")}else console.error("Unexpected Response Status:",e.status)}catch(e){console.error("Login Error",e.response.data),this.errorMessage=e.response.data.error}}}},a=e=>(h("data-v-d1a6a4b0"),e=e(),w(),e),y={class:"login-form"},x=a(()=>o("h2",null,"Login",-1)),D={class:"form-group"},S=a(()=>o("label",{for:"email"},"Email:",-1)),k={class:"form-group"},L=a(()=>o("label",{for:"password"},"Password:",-1)),U=a(()=>o("button",{type:"submit"},"Login",-1)),I={key:0,class:"error-message"};function M(e,s,c,E,t,i){return n(),d("div",y,[x,o("form",{onSubmit:s[2]||(s[2]=g((...r)=>i.loginUser&&i.loginUser(...r),["prevent"]))},[o("div",D,[S,l(o("input",{type:"email",id:"email","onUpdate:modelValue":s[0]||(s[0]=r=>t.formData.email=r),required:""},null,512),[[p,t.formData.email]])]),o("div",k,[L,l(o("input",{type:"password",id:"password","onUpdate:modelValue":s[1]||(s[1]=r=>t.formData.password=r),required:""},null,512),[[p,t.formData.password]])]),U,t.errorMessage?(n(),d("div",I,_(t.errorMessage),1)):f("",!0)],32)])}const B=m(v,[["render",M],["__scopeId","data-v-d1a6a4b0"]]);export{B as default};
