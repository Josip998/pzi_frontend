import{a as l}from"./axios-82afda87.js";import{_ as p,o as i,c as d,b as t,F as h,e as _,q as g,w as u,v as m,t as c,p as f,j as b}from"./index-4e547976.js";const v={data(){return{isLoggedIn:!!localStorage.getItem("token"),user_id:null,customOrders:[],order:{name:"",description:"",imageUrl:"",email:""}}},created(){this.isLoggedIn&&this.loadUserId(),l.get("http://pzi042023.studenti.sum.ba/backend/api/custom-resource-requests").then(e=>{this.customOrders=e.data.customResourceRequests}).catch(e=>{console.error("Error fetching custom resource requests:",e)})},methods:{onFileChange(e){const s=e.target.files[0];s&&(this.order.imageUrl=s)},submitCustomOrder(){const e=new FormData;e.append("name",this.order.name),e.append("description",this.order.description),e.append("image",this.order.imageUrl),e.append("email",this.order.email),l.post("http://pzi042023.studenti.sum.ba/backend/api/custom-resource-request",e,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+localStorage.getItem("token")}}).then(s=>{alert("Custom order submitted successfully"),this.order={name:"",description:"",imageUrl:"",email:""}}).catch(s=>{console.error("Error submitting custom order:",s)})},async loadUserId(){try{const e=await l.get("http://pzi042023.studenti.sum.ba/backend/api/user");this.user_id=e.data.id}catch(e){console.error("Error fetching user data",e)}}}},n=e=>(f("data-v-940b5e9c"),e=e(),b(),e),C={class:"custom"},y={class:"custom-3d-models"},I={key:0},U=n(()=>t("h1",null,"Custom 3D Models Requests",-1)),k={class:"custom-orders"},q={class:"order"},D=["src"],w={key:1},x=n(()=>t("h1",null,"Order a Custom 3D Model:",-1)),S={class:"form-group"},E=n(()=>t("label",{for:"imageUrl"},"Image (JPEG or PNG)",-1)),F={class:"form-group"},M={class:"form-group"},O={class:"form-group"},V=n(()=>t("button",{type:"submit",class:"submit-button"}," Submit Custom Order ",-1));function z(e,s,B,L,r,a){return i(),d("div",C,[t("div",y,[r.isLoggedIn?(i(),d("div",I,[U,t("div",k,[t("div",q,[(i(!0),d(h,null,_(r.customOrders,o=>(i(),d("div",{key:o.id,class:"custom-order"},[t("h2",null,"Order Name: "+c(o.name),1),t("p",null,"Description: "+c(o.description),1),t("p",null,"Contact Email: "+c(o.email),1),t("img",{src:o.image,alt:"Custom Order Image"},null,8,D)]))),128))])])])):(i(),d("div",w,[x,t("div",S,[E,t("input",{type:"file",id:"imageUrl",accept:"image/jpeg, image/png",onChange:s[0]||(s[0]=(...o)=>a.onFileChange&&a.onFileChange(...o)),required:""},null,32)]),t("form",{onSubmit:s[4]||(s[4]=g((...o)=>a.submitCustomOrder&&a.submitCustomOrder(...o),["prevent"])),class:"custom-order-form"},[t("div",F,[u(t("input",{type:"text",id:"name",placeholder:"Your name","onUpdate:modelValue":s[1]||(s[1]=o=>r.order.name=o),required:""},null,512),[[m,r.order.name]])]),t("div",M,[u(t("textarea",{id:"description",placeholder:"Description","onUpdate:modelValue":s[2]||(s[2]=o=>r.order.description=o),required:""},null,512),[[m,r.order.description]])]),t("div",O,[u(t("input",{type:"email",id:"email",placeholder:"Email (for notifications)","onUpdate:modelValue":s[3]||(s[3]=o=>r.order.email=o),required:""},null,512),[[m,r.order.email]])]),V],32)]))])])}const j=p(v,[["render",z],["__scopeId","data-v-940b5e9c"]]);export{j as default};
