import{a as i}from"./axios-82afda87.js";import{_ as f,k as g,o as a,c,i as k,l as b,b as e,t as r,m as u,d as m,p as v,j as p}from"./index-4e547976.js";const C={props:{model:Object,showAdditionalInfo:Boolean,sellerInfo:Object},data(){return{userRole:"",isAdmin:!1}},created(){this.fetchUserRole()},methods:{async fetchUserResources(){try{const o=(await i.get(`http://pzi042023.studenti.sum.ba/backend/api/user/${this.model.user_id}/resources`)).data.resources;console.log("User Resources:",o)}catch(t){console.error("Error fetching user resources:",t)}},async fetchUserRole(){try{const t={headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}},o=await i.get("http://pzi042023.studenti.sum.ba/backend/api/user/role",t);this.userRole=o.data.role,console.log("User Role:",this.userRole),this.isAdmin=this.userRole==="admin"}catch(t){console.error("Error fetching user role",t)}},selectCard(){this.$emit("card-selected",this.model)},editModel(){this.$router.push({name:"EditModel",params:{id:this.model.id}})},deleteModel(){const t={headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}};i.delete(`http://pzi042023.studenti.sum.ba/backend/api/resources/${this.model.id}`,t).then(o=>{console.log("Model deleted successfully:",o.data),window.location.reload()}).catch(o=>{console.error("Error deleting model:",o)})}}},n=t=>(v("data-v-56dc889f"),t=t(),p(),t),R=["src"],I={class:"model-details"},M={class:"model-specs"},y=n(()=>e("strong",null,"Price:",-1)),A=n(()=>e("strong",null,"Size:",-1)),E={key:0,class:"additional-info"},S=n(()=>e("strong",null,"CONTACT SELLER:",-1)),w=n(()=>e("strong",null,"Location:",-1)),U={key:1,class:"admin-actions"};function x(t,o,s,z,h,l){const _=g("router-link");return a(),c("div",{class:"model-card",onClick:o[3]||(o[3]=(...d)=>l.selectCard&&l.selectCard(...d))},[k(_,{to:`/card/${s.model.id}`,class:"model-card-link"},{default:b(()=>[e("img",{src:s.model.image,alt:"Model Image",class:"model-image"},null,8,R)]),_:1},8,["to"]),e("div",I,[e("h3",null,r(s.model.name),1),e("p",null,r(s.model.description),1),e("div",M,[e("div",null,[y,u(" $"+r(s.model.price),1)]),e("div",null,[A,u(" "+r(s.model.size),1)])])]),s.showAdditionalInfo?(a(),c("div",E,[e("div",null,[S,e("h4",null,r(s.sellerInfo.email),1)]),e("div",null,[w,e("h4",null,r(s.sellerInfo.location),1)]),e("div",null,[e("strong",null,[u("All Models by this user: "),e("a",{href:"#",onClick:o[0]||(o[0]=(...d)=>l.fetchUserResources&&l.fetchUserResources(...d))},"USER ID: "+r(s.model.user_id),1)])])])):m("",!0),h.isAdmin?(a(),c("div",U,[e("button",{onClick:o[1]||(o[1]=(...d)=>l.editModel&&l.editModel(...d)),class:"admin-button edit-button"},"Edit"),e("button",{onClick:o[2]||(o[2]=(...d)=>l.deleteModel&&l.deleteModel(...d)),class:"admin-button delete-button"},"Delete")])):m("",!0)])}const V=f(C,[["render",x],["__scopeId","data-v-56dc889f"]]);export{V as M};
